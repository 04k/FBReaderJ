<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0055)http://www.fbreader.org/FBReaderJ/subversion_howto.html -->
<HTML><HEAD><TITLE>Как использовать Subversion.</TITLE><LINK 
href="http://www.fbreader.org/FBReader.ico" type=image/x-icon 
rel="shortcut icon"><LINK href="http://www.fbreader.org/FBReader.ico" 
type=image/x-icon rel=icon><LINK 
href="Как использовать Subversion.files/style.css" type=text/css rel=stylesheet>
<META http-equiv=Content-Type content="text/html; charset=utf-8">
<META content="MSHTML 6.00.2900.3059" name=GENERATOR></HEAD>
<BODY>
<H3>Что такое Subversion.</H3>
<P>Subversion – система контроля версий файлов (в нашем случае – исходного 
кода). Состоит из сервера (находящегося в нашей ситуации на сайте 
<TT>only.mawhrin.net</TT>) и клиентов, находящихся на компьютерах каждого из 
пользователей.</P>
<P>На сервере хранится весь текущий исходный код и вся история его изменений. С 
сервера можно получить как тот набор файлов, который используется сейчас, так и 
набор файлов в любой указанный момент времени. Кроме того, можно посмотреть, 
кто, когда и какие изменения вносил, а если пользователи не ленятся писать 
комментарии – то и пояснения к этим изменениям.</P>
<P>У пользователя клиента должен быть, разумеется, доступ в Интернет. 
Пользователь может взять текущую (или, вообще говоря, любую другую) версию 
файлов. Пользователь может положить на сервер новые версии некоторых файлов (в 
том числе, он может добавить или удалить какие-нибудь файлы и/или каталоги).</P>
<P>Эта страница содержит минимум информации, настоятельно рекомендую почитать, 
например, <A href="http://svnbook.red-bean.com/index.ru.html">вот эту 
книжку</A>.</P>
<H3>Советы по "стилю использования" Subversion.</H3>
<UL>
  <LI>Не бойтесь выкладывать свои изменения в репозиторий. Их всегда можно 
  “откатить”. 
  <LI>Нормальный режим работы – сохранять свои изменения каждый раз, когда 
  завершен хотя бы маленький кусок кода. (Это означает, что типично изменения 
  выкладываются не раз в день и тем более неделю, а примерно раз в час.) 
  <LI>Начинайте работу с получения текущей версии кода из репозитория. Иначе вы 
  можете потерять время, если начнете менять файлы, которые кто-то уже поменял. 
  (Вам придется либо объединять изменения, либо, что еще обиднее, выкидывать 
  свои изменения, если работа уже сделана до вас.) 
  <LI>Единственное ограничение на выкладывание кода – не выкладывайте 
  некомпилирующийся код, иначе вы здорово затрудните работу тем, кто следует 
  предыдущему совету. Не поленитесь скомпилировать код перед выкладыванием. 
  Проверьте, что вы действительно положили в репозиторий все добавленные файлы. 
  (Это самая популярная проблема, приводящая к некомпилирующемуся коду в 
  репозитории.) 
  <LI>Перед выкладыванием кода, возьмите текущую версию из репозитория. Это 
  позволит вам избежать ситуации, когда некомпилирующийся код возникает из-за 
  двух изменений, сделанных разными людьми в разных файлах. Если выяснилось, что 
  действительно кто-то что-то поменял за время вашей работы – проверьте 
  компилируемость еще раз. 
  <LI>Всегда пишите комментарий к тому, что вы выкладываете: всего 3 слова 
  “удалены неиспользуемые поля” сэкономят кучу времени тому, кому придется 
  понимать ваши изменения (и не в последнюю очередь – автору изменений). 
  <LI>Не обходитесь только этим документом – он очень короткий и описывает 
  только самые простые случаи. Например, в нем ничего не сказано о том, как 
  объединять изменения, сделанные разными людьми в одном файле. </LI></UL>
<H3>Как использовать Subversion из Eclipse.</H3>
<H4>Как начать работать.</H4>
<UL>
  <LI>Нужно установить plugin для работы с subversion из Eclipse. В той версии 
  Eclipse, которая установилась на моем компьютере (скачана с <A 
  href="http://www.eclipse.org/">http://www.eclipse.org/</A>, версия 3.2.1), по 
  умолчанию такого plugin'a не было. Я установил <A 
  href="http://subclipse.tigris.org/">Subclipse</A>, на сайте есть очень близкая 
  к правде <A href="http://subclipse.tigris.org/install.html">инструкция по 
  установке</A>. 
  <LI>Создание проекта.
  <UL>
    <LI>Иду в меню: <TT>File-&gt;New-&gt;Project...</TT>. Из предложенного 
    списка выбираю <TT>SVN-&gt;Checkout Projects from SVN</TT>. Нажимаю на 
    кнопочку <TT>Next</TT>. (Дальше про нажатия на эту кнопку писать не буду.) 
    <LI>Выбираю <TT>Create a new repository location</TT>. 
    <LI>Вписываю URL: <TT>https://only.mawhrin.net/repos/FBReaderJ/trunk</TT>. 
    <LI>Ввожу свои имя и пароль. 
    <LI>Помечаю корневой каталог "to be checked out from SVN". 
    <LI>В качестве <TT>Project Name</TT> вписываю <TT>FBReaderJ</TT>. Теперь 
    кнопка <TT>Finish</TT>. </LI></UL>
  <LI>Теперь я могу открывать проект FBReaderJ (файл <TT>.project</TT> из 
  соответствующего каталога) – и работать. </LI></UL>
<H4>Как положить свои изменения в репозиторий.</H4>
<UL>
  <LI>В Java Perspective вызываю контекстное меню для файла (или каталога), 
  который я хочу положить в репозиторий. Выбираю пункт 
  <TT>Team-&gt;Commit...</TT>. 
  <LI>Вписываю комментарий, ставлю галочки напротив того, что реально хочу 
  закоммитить. Нажимаю <TT>OK</TT>. </LI></UL>
<H4>Как взять из репозитория текущую версию кода.</H4>
<UL>
  <LI>В Java Perspective вызываю контекстное меню для файла (или каталога), 
  который я хочу получить (обычно это каталог <TT>src</TT>). Выбираю пункт 
  <TT>Team-&gt;Synchronize with Repository</TT>. </LI></UL>
<H3>Как использовать Subversion из командной строки (Linux).</H3>
<H4>Как начать работать.</H4>
<UL>
  <LI>Нужно установить subversion. В debian'е пакет так и называется 
  <TT>subversion</TT>. Возможен еще вариант <TT>svn</TT>. 
  <LI>Создаю каталог, в котором будут лежать файлы проекта. Захожу в него, пишу 
  команду <PRE>svn checkout --username=&lt;my_svn_account&gt; https://only.mawhrin.net/repos/FBReaderJ/trunk .</PRE>(если 
  имя пользователя linux совпадает с именем в репозитории, соответствующий 
  параметр можно опустить). </LI></UL>
<H4>Как положить свои изменения в репозиторий.</H4>
<UL>
  <LI>Если я только поменял некоторые файлы, ничего не добавляя и не удаляя, 
  просто пишу команду <TT>svn commit</TT>. 
  <LI>Если я хочу добавить какие-то файлы/каталоги – пишу сперва <TT>svn add 
  &lt;filename&gt;</TT>. Это действие происходит локально, без связи с сервером. 
  На сервер изменения отправляются той же коммандой <TT>svn commit</TT>. 
  <LI>Для удаления есть команда <TT>svn remove &lt;filename&gt;</TT>. Она тоже 
  работает локально. 
  <LI>Чтобы посмотреть, какие файлы локально изменены/добавлены/появились, но 
  еще не добавлены, существует команда <TT>svn status</TT>. </LI></UL>
<H4>Как взять из репозитория текущую версию кода.</H4>
<UL>
  <LI>В каталоге, содержимое которого я хочу получить (обычно – в <TT>src</TT>), 
  пишу команду <TT>svn update</TT>. </LI></UL></BODY></HTML>
